$(function() {
  $.ajax({
    type: "POST",
    url: "/courses/load_electives",
    dataType: "html",
    success: function (result) {
      $('#electives').empty();
      $('#electives').html(result);
    },
    error: function () {
      alert('Something went wrong :(');
    }
  });

  $('.toggle-courses').click(function(){
    var major = $(this).text().split(' ')[0];
    if(major == "EE") {
      $('.CE-course').hide();
      $('.EE-course').show();
      $('.title').text("Electrical Engineering Core Courses");
      $(this).text("CE Schedule");
    } else {
      $('.CE-course').show();
      $('.EE-course').hide();
      $('.title').text("Computer Engineering Core Courses");
      $(this).text("EE Schedule");
    }
  });

  //when you click a course, show a modal with the right info
  $('td').click(function(){
    if ($(this).attr("class") == 'no-hover'){ return; }
    console.log();
    $('#course-detail-modal').empty();
    var courseCode = $(this).text().trim();
    var url = $(this).data("course") == true ? "/courses/detail" : "/courses/detail_elective"
    if(courseCode.length != 0) {
      $.ajax({
        type: "POST",
        url: url,
        data: {'course_code': courseCode},
        dataType: "html",
        success: function (result) {
          $('#course-detail-modal').html(result);
        },
        error: function () {
          alert('Something went wrong :(');
        }
      });
    }
  });

});

function toggleElectiveContainer(data) {
  var toggler = $(data);
  var id = toggler.attr('value');
  if(toggler.text() == "+") {
    $('#' + id).show();
    toggler.text("-");
  }
  else {
    $('#' + id).hide();
    toggler.text("+");
  }
}